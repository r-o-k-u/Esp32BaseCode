<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32 Camera</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ESP32 DualComm System</h1>
            <h2>Camera Control</h2>
        </header>
        
        <nav>
            <a href="index.html">Dashboard</a>
            <a href="sensors.html">Sensors</a>
            <a href="actuators.html">Actuators</a>
            <a href="camera.html" class="active">Camera</a>
            <a href="communication.html">Communication</a>
            <a href="logs.html">Logs</a>
            <a href="config.html">Configuration</a>
        </nav>

        <main>
            <div class="camera-controls controls">
                <button id="startCamera" class="btn-primary">
                    <i class="fas fa-play"></i> Start Camera
                </button>
                <button id="stopCamera" class="btn-secondary">
                    <i class="fas fa-stop"></i> Stop Camera
                </button>
                <button id="captureImage" class="btn-success">
                    <i class="fas fa-camera"></i> Capture
                </button>
                <button id="startStream" class="btn-info">
                    <i class="fas fa-video"></i> Start Stream
                </button>
                <button id="stopStream" class="btn-warning">
                    <i class="fas fa-stop-circle"></i> Stop Stream
                </button>
                <div style="display: flex; gap: 0.5rem; margin-left: auto;">
                    <button id="flashOn" class="btn-small btn-warning">
                        <i class="fas fa-lightbulb"></i> Flash On
                    </button>
                    <button id="flashOff" class="btn-small btn-secondary">
                        <i class="fas fa-lightbulb"></i> Flash Off
                    </button>
                </div>
            </div>

            <div class="camera-preview card">
                <div class="card-header">
                    <h2><i class="fas fa-eye"></i> Live Preview</h2>
                    <div class="stream-status" id="streamStatus">Stream: Stopped</div>
                </div>
                <div class="preview-container" style="min-height: 400px;">
                    <img id="cameraFeed" src="" alt="Camera Feed" style="display: none; width: 100%; border-radius: 1rem;">
                    <div id="noFeedMessage" style="color: var(--text-muted); text-align: center; padding: 3rem;">
                        <i class="fas fa-video-slash" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <p>Camera not started</p>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 2rem;">
                <div class="card-header">
                    <h2><i class="fas fa-sliders-h"></i> Camera Settings</h2>
                    <button id="applySettings" class="btn-primary btn-small">
                        <i class="fas fa-check"></i> Apply Settings
                    </button>
                </div>
                <div style="padding: 1.5rem;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                        <div>
                            <label>Resolution</label>
                            <select id="resolution">
                                <option value="11">1600x1200 (UXGA)</option>
                                <option value="10">1280x1024 (SXGA)</option>
                                <option value="9">1024x768 (XGA)</option>
                                <option value="8">800x600 (SVGA)</option>
                                <option value="5" selected>320x240 (QVGA)</option>
                                <option value="4">160x120 (QQVGA)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label>Quality: <span id="qualityValue">10</span></label>
                            <input type="range" id="quality" min="1" max="63" value="10">
                        </div>
                        
                        <div>
                            <label>Brightness: <span id="brightnessValue">0</span></label>
                            <input type="range" id="brightness" min="-2" max="2" value="0">
                        </div>
                        
                        <div>
                            <label>Contrast: <span id="contrastValue">0</span></label>
                            <input type="range" id="contrast" min="-2" max="2" value="0">
                        </div>
                        
                        <div>
                            <label>Saturation: <span id="saturationValue">0</span></label>
                            <input type="range" id="saturation" min="-2" max="2" value="0">
                        </div>
                        
                        <div>
                            <label>Special Effect</label>
                            <select id="specialEffect">
                                <option value="0">No Effect</option>
                                <option value="1">Negative</option>
                                <option value="2">Grayscale</option>
                                <option value="3">Red Tint</option>
                                <option value="4">Green Tint</option>
                                <option value="5">Blue Tint</option>
                                <option value="6">Sepia</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 2rem;">
                <div class="card-header">
                    <h2><i class="fas fa-images"></i> Image Gallery</h2>
                    <div style="display: flex; gap: 0.5rem;">
                        <button id="refreshGallery" class="btn-small btn-secondary">
                            <i class="fas fa-sync"></i> Refresh
                        </button>
                        <button id="clearGallery" class="btn-small btn-danger">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                        <button id="downloadAll" class="btn-small btn-success">
                            <i class="fas fa-download"></i> Download All
                        </button>
                    </div>
                </div>
                <div id="imageGrid" class="image-grid" style="padding: 1.5rem;">
                    <!-- Images will be loaded here -->
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>